# Today

- Learn React fundamentals

## Go

### [Type assertions](https://go.dev/ref/spec#Type_assertions)

``` go
var i interface{}
i = int(39)

a, ok := i.(int)
// a = 39, ok = true

b, ok := i.(string)
// b = "", ok = false
```

## React

### [useRef](https://reactjs.org/docs/hooks-reference.html#useref)

useRef returns a mutable ref object whose .current property is initialized to the passed argument (initialValue). The returned object will persist for the full lifetime of the component.

A common use case is to access a child imperatively:
```
function TextInputWithFocusButton() {
  const inputEl = useRef(null);
  const onButtonClick = () => {
    // `current` points to the mounted text input element
    inputEl.current.focus();
  };
  return (
    <>
      <input ref={inputEl} type="text" />
      <button onClick={onButtonClick}>Focus the input</button>
    </>
  );
}
```

### [useEffect](https://reactjs.org/docs/hooks-effect.html)

The Effect Hook lets you perform side effects in function components:

``` javascript
import React, { useState, useEffect } from 'react';

function Example() {
  const [count, setCount] = useState(0);

  // Similar to componentDidMount and componentDidUpdate:
  useEffect(() => {
    // Update the document title using the browser API
    document.title = `You clicked ${count} times`;
  });

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

### Submit form

Frontend:

``` javascript
async function handleSubmit(e) {
    e.preventDefault();
    if (!name.trim()) {
        return;
    }

    let body = {
        Content: name,
        IsDone: false,
    }

    const response = await fetch('api/todo/create', {
            method: 'POST',
            body: JSON.stringify(body),
            headers: {
                'Content-Type': 'application/json',
            },
        }
    );

    const data = await response.json();
    if (!response.ok) {
        let errorText = 'Failed to create todo.';
        if (!data.hasOwnProperty('error')) {
            throw new Error(errorText);
        }
    }
}
```

Backend:

``` go
var t todo.Todo
err := c.BindJSON(&t)
if err != nil {
    log.Println(err)
    return
}

t.ID = bson.NewObjectId()
err = todo.Create(t)
if err != nil {
    log.Println(err)
    return
}
```
